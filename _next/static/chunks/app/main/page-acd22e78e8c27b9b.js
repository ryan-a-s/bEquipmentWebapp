(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[798],{3853:(e,t,n)=>{"use strict";n.d(t,{AppProvider:()=>r,U:()=>i});var l=n(5155),a=n(2115);let s=(0,a.createContext)(void 0);function r(e){let{children:t}=e,[n,r]=(0,a.useState)(null),[i,d]=(0,a.useState)(null),[c,o]=(0,a.useState)(null),[m,u]=(0,a.useState)(null),[x,g]=(0,a.useState)(null),[b,h]=(0,a.useState)({});return(0,l.jsx)(s.Provider,{value:{location:n,secondaryLocation:i,patientId:c,patientWeight:m,dependencyStatus:x,equipment:b,setLocation:r,setSecondaryLocation:d,setPatientId:o,setPatientWeight:u,setDependencyStatus:g,setEquipment:e=>{h(t=>({...t,...e}))}},children:t})}function i(){let e=(0,a.useContext)(s);if(!e)throw Error("useAppContext must be used inside AppProvider");return e}},4797:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var l=n(5155),a=n(2115),s=n(3853),r=n(777);function i(e){let{onNext:t}=e,{location:n,setLocation:a,secondaryLocation:i,setSecondaryLocation:d}=(0,s.U)(),c=Object.entries(r.Bs).map(e=>{let[t,n]=e;return{value:t,label:n}});return(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Select Primary Location"}),(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:c.map(e=>(0,l.jsx)("button",{onClick:()=>{var n;a(n=e.value),"F06033-K"===n||"F06034-A"===n?d(""):(d(null),t())},className:"p-4 border rounded-lg shadow-sm transition ".concat(n===e.value?"bg-blue-200 border-blue-600":"bg-white hover:bg-gray-50"),children:e.label},e.value))}),("F06033-K"===n||"F06034-A"===n)&&(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("label",{className:"block mb-2",children:"Enter Ward Name:"}),(0,l.jsx)("input",{type:"text",value:null!=i?i:"",onChange:e=>d(e.target.value),className:"border p-2 w-full max-w-md rounded",placeholder:"Ward Name"}),(0,l.jsx)("button",{disabled:!i,onClick:t,className:"mt-3 px-4 py-2 rounded-lg ".concat(i?"bg-green-600 text-white":"bg-gray-300 text-gray-600 cursor-not-allowed"),children:"Continue"})]})]})}function d(e){let{onNext:t}=e,{patientId:n,setPatientId:r}=(0,s.U)(),[i,d]=(0,a.useState)(n||"");return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("label",{children:"Enter Patient NHI:"}),(0,l.jsx)("input",{type:"text",value:i,onChange:e=>d(e.target.value),className:"border p-2 w-full"}),(0,l.jsx)("button",{onClick:()=>{r(i),t()},className:"mt-4 bg-green-600 text-white px-4 py-2 rounded",disabled:!i,children:"Next"})]})}let c=[{label:"180 – 250 kg",min:180,max:250},{label:"250 – 350 kg",min:250,max:350},{label:"350+ kg",min:350,max:null}];function o(e){var t,n;let{onNext:i}=e,{location:d,patientWeight:o,setPatientWeight:m,dependencyStatus:u,setDependencyStatus:x}=(0,s.U)(),[g,b]=(0,a.useState)(null!=(n=null==o||null==(t=o.min)?void 0:t.toString())?n:""),[h,p]=(0,a.useState)(null),[v,N]=(0,a.useState)(!1),[j,y]=(0,a.useState)(null);if(!d)return(0,l.jsx)("p",{className:"p-4",children:"No location selected."});let f=(0,r.GI)(d),w=!f;return(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Patient Weight"}),f&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",{type:"number",value:g,onChange:e=>b(e.target.value),placeholder:"Enter weight in kg",className:"border p-2 rounded w-full max-w-xs"}),(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("h3",{className:"font-semibold mb-2",children:"Patient Dependency"}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("button",{onClick:()=>x("independent"),className:"px-4 py-2 rounded-lg ".concat("independent"===u?"bg-blue-200 border border-blue-600":"bg-gray-100 hover:bg-gray-200"),children:"Independent"}),(0,l.jsx)("button",{onClick:()=>x("dependent"),className:"px-4 py-2 rounded-lg ".concat("dependent"===u?"bg-blue-200 border border-blue-600":"bg-gray-100 hover:bg-gray-200"),children:"Dependent"})]})]})]}),w&&(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-w-md",children:c.map((e,t)=>(0,l.jsx)("button",{onClick:()=>p(t),className:"p-2 border rounded ".concat(h===t?"bg-blue-200 border-blue-600":"bg-gray-100 hover:bg-gray-200"),children:e.label},t))}),(0,l.jsx)("button",{onClick:()=>{if(f){let e=parseInt(g,10);isNaN(e)||e<=0||(m({min:e,max:e}),i())}else if(w){if(null===h)return;let e=c[h];if("F3S638-G"===d&&e.min>=250){y({min:e.min,max:e.max}),N(!0);return}m({min:e.min,max:e.max}),i()}},className:"mt-6 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition",children:"Continue"}),v&&(0,l.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm text-center shadow-lg",children:[(0,l.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Alert"}),(0,l.jsx)("p",{className:"mb-6",children:"Any patient over 250kg at Hutt Emergency will need ICU bedspace – check availability. If not available, consider diverting patient / ambulance to Wellington."}),(0,l.jsx)("button",{onClick:()=>{j&&(m(j),N(!1),i())},className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition",children:"OK"})]})})]})}var m=n(7260),u=n(1937);function x(e){var t;let{onNext:n}=e,{location:i,dependencyStatus:d,patientWeight:c,equipment:o,setEquipment:x}=(0,s.U)(),g=(0,m.useRouter)(),b=null!=(t=null==c?void 0:c.max)?t:null==c?void 0:c.min,h=!!i&&(0,r.GI)(i),p=[],v=[];h?h&&"independent"===d?(p=["Bed","Mattress","Commode"],v=["Walking Aids","Wheelchairs","Bedside Chairs"]):h&&"dependent"===d&&(p=["Bed","Mattress","Commode","Hoist","Slings","Mat"],v=["Wheelchairs","Bedside Chairs"]):(p=["Bed","Mattress","Mat","Accessories"],v=["Commode"]);let N=[...p,...v];if((0,a.useEffect)(()=>{if(!o.Bed)return;let e=u.l.find(e=>{var t;return"Mattress"===e.category&&(null==(t=e.defaultForBeds)?void 0:t.includes(o.Bed))});e&&o.Mattress!==e.name&&x({...o,Mattress:e.name})},[o.Bed,o.Mattress,x]),!i||!c)return(0,l.jsx)("p",{className:"p-4",children:"Missing patient info or location."});let j=e=>u.l.filter(t=>{if(t.category!==e||!t.location.includes(i)||b>t.maxLoad)return!1;if("Mattress"===e&&o.Bed){var n;return null==(n=t.compatibleBeds)?void 0:n.includes(o.Bed)}return!0});return(0,l.jsxs)("div",{className:"p-4 space-y-6",children:[N.map(e=>{let t=j(e);return(0,l.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-3",children:e}),0===j(e).length&&(0,l.jsxs)("p",{className:"text-gray-500 mb-2",children:["No available ",e.toLowerCase()," under the patient’s weight limit."]}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.map(t=>{var n;let a=o[e]===t.name,s="Mattress"===e&&o.Bed&&(null==(n=t.defaultForBeds)?void 0:n.includes(o.Bed));return(0,l.jsxs)("button",{onClick:()=>{var n;return n=t.name,void x({...o,[e]:o[e]===n?void 0:n})},className:"p-4 border rounded-lg text-left shadow-sm transition ".concat(a?"bg-blue-200 text-black border-blue-600":"bg-white hover:bg-gray-50"),children:[(0,l.jsx)("p",{className:"font-medium",children:t.name}),(0,l.jsxs)("p",{className:"text-sm text-gray-500",children:["Max load: ",t.maxLoad,"kg"]}),(0,l.jsxs)("p",{className:"text-sm text-gray-500",children:["Procurement:"," ",s?"Included with bed":(e=>{var t;let n=r.fy.Wellington.includes(i)?"Wellington":"Hutt";return null!=(t=e.procurement[n])?t:"N/A"})(t)]}),t.notes&&(0,l.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:t.notes})]},t.name)})})]},e)}),(0,l.jsx)("button",{onClick:()=>{null==n||n(),g.push("/ordersummary")},className:"mt-6 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition",children:"Continue"})]})}function g(){let[e,t]=(0,a.useState)(1),{location:n,secondaryLocation:c,patientId:m,patientWeight:u,dependencyStatus:g,equipment:b}=(0,s.U)(),h=[{id:1,title:"Location",completed:!!n,summary:n?"".concat((0,r.U6)(n)).concat(c?" - "+c:""):""},{id:2,title:"Patient ID",completed:!!m,summary:null!=m?m:""},{id:3,title:"Weight",completed:!!u&&(!(n&&(0,r.GI)(n))||!!g),summary:u?n&&!(0,r.GI)(n)?u.min&&u.max?"".concat(u.min," – ").concat(u.max," kg"):"".concat(u.min,"+ kg"):"".concat(u.min,"kg").concat(g?" - "+g:""):""},{id:4,title:"Equipment",completed:Object.keys(b).length>0,summary:Object.keys(b).length?"".concat(Object.keys(b).length," items selected"):""}],p=e=>{let n=e+1;n<=h.length&&t(n)};return(0,l.jsx)("div",{className:"max-w-4xl mx-auto p-6 space-y-4",children:h.map(n=>(0,l.jsxs)("div",{className:"border rounded shadow-sm",children:[(0,l.jsxs)("button",{className:"w-full p-3 text-left font-bold flex justify-between items-center bg-gray-100 hover:bg-gray-200",onClick:()=>t(e===n.id?0:n.id),children:[(0,l.jsxs)("span",{children:["Step ".concat(n.id,": ").concat(n.title),n.summary&&(0,l.jsxs)("span",{className:"text-gray-500 ml-2",children:["(",n.summary,")"]})]}),n.completed&&(0,l.jsx)("span",{className:"text-green-600",children:"✅"})]}),e===n.id&&(0,l.jsxs)("div",{className:"p-4 bg-white",children:[1===n.id&&(0,l.jsx)(i,{onNext:()=>p(1)}),2===n.id&&(0,l.jsx)(d,{onNext:()=>p(2)}),3===n.id&&(0,l.jsx)(o,{onNext:()=>p(3)}),4===n.id&&(0,l.jsx)(x,{onNext:()=>p(4)})]})]},n.id))})}},9425:(e,t,n)=>{Promise.resolve().then(n.bind(n,4797))}},e=>{e.O(0,[937,441,255,358],()=>e(e.s=9425)),_N_E=e.O()}]);