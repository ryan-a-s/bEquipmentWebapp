(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[798],{63:(e,t,n)=>{"use strict";var l=n(7260);n.o(l,"useRouter")&&n.d(t,{useRouter:function(){return l.useRouter}})},3853:(e,t,n)=>{"use strict";n.d(t,{AppProvider:()=>r,U:()=>i});var l=n(5155),s=n(2115);let a=(0,s.createContext)(void 0);function r(e){let{children:t}=e,[n,r]=(0,s.useState)(null),[i,d]=(0,s.useState)(null),[o,c]=(0,s.useState)(null),[u,m]=(0,s.useState)(null),[x,g]=(0,s.useState)(null),[p,h]=(0,s.useState)({});return(0,l.jsx)(a.Provider,{value:{location:n,secondaryLocation:i,patientId:o,patientWeight:u,dependencyStatus:x,equipment:p,setLocation:r,setSecondaryLocation:d,setPatientId:c,setPatientWeight:m,setDependencyStatus:g,setEquipment:e=>{h(t=>({...t,...e}))},resetContext:()=>{r(null),d(null),c(null),m(null),g(null),h({})}},children:t})}function i(){let e=(0,s.useContext)(a);if(!e)throw Error("useAppContext must be used inside AppProvider");return e}},5759:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var l=n(5155),s=n(2115),a=n(3853),r=n(777);function i(e){let{onNext:t}=e,{location:n,setLocation:s,secondaryLocation:i,setSecondaryLocation:d}=(0,a.U)(),o=Object.entries(r.Bs).map(e=>{let[t,n]=e;return{value:t,label:n}});return(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Select Primary Location"}),(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:o.map(e=>(0,l.jsx)("button",{onClick:()=>{var n;s(n=e.value),"F06033-K"===n||"F06034-A"===n?d(""):(d(null),t())},className:"p-4 border rounded-lg shadow-sm transition ".concat(n===e.value?"bg-blue-200 border-blue-600":"bg-white hover:bg-gray-50"),children:e.label},e.value))}),("F06033-K"===n||"F06034-A"===n)&&(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("label",{className:"block mb-2",children:"Enter Ward Name:"}),(0,l.jsx)("input",{type:"text",value:null!=i?i:"",onChange:e=>d(e.target.value),className:"border p-2 w-full max-w-md rounded",placeholder:"Ward Name"}),(0,l.jsx)("button",{disabled:!i,onClick:t,className:"mt-3 px-4 py-2 rounded-lg ".concat(i?"bg-green-600 text-white":"bg-gray-300 text-gray-600 cursor-not-allowed"),children:"Continue"})]})]})}function d(e){let{onNext:t}=e,{patientId:n,setPatientId:r}=(0,a.U)(),[i,d]=(0,s.useState)(n||"");return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("label",{children:"Enter Patient NHI:"}),(0,l.jsx)("input",{type:"text",value:i,onChange:e=>d(e.target.value),className:"border p-2 w-full"}),(0,l.jsx)("button",{onClick:()=>{r(i),t()},className:"mt-4 bg-green-600 text-white px-4 py-2 rounded",disabled:!i,children:"Next"})]})}let o=[{label:"180 – 250 kg",min:180,max:250},{label:"250 – 350 kg",min:250,max:350},{label:"350+ kg",min:350,max:null}];function c(e){var t,n;let{onNext:i}=e,{location:d,patientWeight:c,setPatientWeight:u,dependencyStatus:m,setDependencyStatus:x}=(0,a.U)(),[g,p]=(0,s.useState)(null!=(n=null==c||null==(t=c.min)?void 0:t.toString())?n:""),[h,b]=(0,s.useState)(null),[v,N]=(0,s.useState)(!1),[j,y]=(0,s.useState)(null);if(!d)return(0,l.jsx)("p",{className:"p-4",children:"No location selected."});let f=(0,r.GI)(d),w=!f;return(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Patient Weight"}),f&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",{type:"number",value:g,onChange:e=>p(e.target.value),placeholder:"Enter weight in kg",className:"border p-2 rounded w-full max-w-xs"}),(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("h3",{className:"font-semibold mb-2",children:"Patient Dependency"}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("button",{onClick:()=>x("independent"),className:"px-4 py-2 rounded-lg ".concat("independent"===m?"bg-blue-200 border border-blue-600":"bg-gray-100 hover:bg-gray-200"),children:"Independent"}),(0,l.jsx)("button",{onClick:()=>x("dependent"),className:"px-4 py-2 rounded-lg ".concat("dependent"===m?"bg-blue-200 border border-blue-600":"bg-gray-100 hover:bg-gray-200"),children:"Dependent"})]})]})]}),w&&(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-w-md",children:o.map((e,t)=>(0,l.jsx)("button",{onClick:()=>b(t),className:"p-2 border rounded ".concat(h===t?"bg-blue-200 border-blue-600":"bg-gray-100 hover:bg-gray-200"),children:e.label},t))}),(0,l.jsx)("button",{onClick:()=>{if(f){let e=parseInt(g,10);isNaN(e)||e<=0||(u({min:e,max:e}),i())}else if(w){if(null===h)return;let e=o[h];if("F3S638-G"===d&&e.min>=250){y({min:e.min,max:e.max}),N(!0);return}u({min:e.min,max:e.max}),i()}},className:"mt-6 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition",children:"Continue"}),v&&(0,l.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm text-center shadow-lg",children:[(0,l.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Alert"}),(0,l.jsx)("p",{className:"mb-6",children:"Any patient over 250kg at Hutt Emergency will need ICU bedspace – check availability. If not available, consider diverting patient / ambulance to Wellington."}),(0,l.jsx)("button",{onClick:()=>{j&&(u(j),N(!1),i())},className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition",children:"OK"})]})})]})}var u=n(63),m=n(1937);function x(e){var t;let{onNext:n}=e,{location:i,dependencyStatus:d,patientWeight:o,equipment:c,setEquipment:x}=(0,a.U)(),g=(0,u.useRouter)(),p=null!=(t=null==o?void 0:o.max)?t:null==o?void 0:o.min,h=!!i&&(0,r.GI)(i),b=!h;if((0,s.useEffect)(()=>{var e,t;if(!c.Bed)return;let n=m.l.find(e=>{var t;return"Mattress"===e.category&&(null==(t=e.defaultForBeds)?void 0:t.includes(c.Bed))});!n||c.Mattress&&(null==(t=m.l.find(e=>e.name===c.Mattress))||null==(e=t.compatibleBeds)?void 0:e.includes(c.Bed))||x({...c,Mattress:n.name})},[c.Bed,c.Mattress,x]),(0,s.useEffect)(()=>{let e;p&&("Hoversling"===c.Slings?e="2x Hovertech Pumps":c.Mat&&(e=p>=300?"2x Pumps":"Pump"),e&&c.Accessories!==e&&x({...c,Accessories:e}))},[c.Mat,c.Slings,p,c.Accessories,x]),!i||!o)return(0,l.jsx)("p",{className:"p-4",children:"Missing patient info, location, or weight."});let v=!!c.Mat||"Hoversling"===c.Slings,N=[],j=[];b?(N=["Bed","Mattress","Mat"],j=["Commode"]):h&&"independent"===d?(N=["Bed","Mattress","Commode"],j=["Walking Aids","Wheelchairs","Bedside Chairs"]):h&&"dependent"===d&&(N=["Bed","Mattress","Commode","Hoist","Slings","Mat"],j=["Wheelchairs","Bedside Chairs"]),v&&N.push("Accessories");let y=[...N,...j],f=e=>m.l.filter(t=>{if(t.category!==e||!i||!t.location.includes(i)||"number"==typeof t.minLoad&&p<t.minLoad||"number"==typeof t.maxLoad&&t.maxLoad>0&&p>t.maxLoad)return!1;if("Mattress"===e&&c.Bed){var n;return null==(n=t.compatibleBeds)?void 0:n.includes(c.Bed)}return!("Accessories"===e&&["Pump","2x Pumps","2x Hovertech Pumps"].includes(t.name))||t.name===c.Accessories});return(0,l.jsxs)("div",{className:"p-4 space-y-6",children:[b&&(0,l.jsx)("p",{className:"p-2 bg-yellow-100 text-yellow-800 rounded",children:"If your patient is likely to be in ED for an extended period of time, contact M&H specialist for advice on other equipment requirements."}),y.map(e=>{let t=f(e);return t.length?(0,l.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-3",children:e}),"Walking Aids"===e&&"independent"===d&&(0,l.jsx)("p",{className:"p-2 bg-yellow-100 text-yellow-800 rounded",children:"Consider the patient's usual walking aid, refer to physio if mobility levels have changed."}),0===f(e).length&&(0,l.jsxs)("p",{className:"text-gray-500 mb-2",children:["No available ",e.toLowerCase()," under the patient’s weight limit. Please get in contact with moving and handling specialist."]}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.map(t=>{var n;let s=c[e]===t.name,a="Mattress"===e&&c.Bed&&(null==(n=t.defaultForBeds)?void 0:n.includes(c.Bed));return(0,l.jsxs)("button",{onClick:()=>{var n;return n=t.name,void x({...c,[e]:c[e]===n?void 0:n})},className:"p-4 border rounded-lg text-left shadow-sm transition ".concat(s?"bg-blue-200 text-black border-blue-600":"bg-white hover:bg-gray-50"),children:[(0,l.jsx)("p",{className:"font-medium",children:t.name}),"Accessories"!==t.category&&(0,l.jsxs)("p",{className:"text-sm text-gray-500",children:["Max load: ",t.maxLoad>0?"".concat(t.maxLoad,"kg"):"N/A"]}),(0,l.jsxs)("p",{className:"text-sm text-gray-500",children:["Procurement: ",a?"Included with bed":(e=>{var t,n;let l=i&&r.fy.Wellington.includes(i)?"Wellington":"Hutt";return null!=(n=null==(t=e.procurement)?void 0:t[l])?n:"N/A"})(t)]}),t.notes&&(0,l.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:t.notes})]},t.name)})})]},e):null}),(0,l.jsx)("button",{onClick:()=>{null==n||n(),g.push("/ordersummary")},className:"mt-6 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition",children:"Continue"})]})}function g(){let[e,t]=(0,s.useState)(1),{location:n,secondaryLocation:o,patientId:u,patientWeight:m,dependencyStatus:g,equipment:p}=(0,a.U)(),h=[{id:1,title:"Location",completed:!!n,summary:n?"".concat((0,r.U6)(n)).concat(o?" - "+o:""):""},{id:2,title:"Patient ID",completed:!!u,summary:null!=u?u:""},{id:3,title:"Weight",completed:!!m&&(!(n&&(0,r.GI)(n))||!!g),summary:m?n&&!(0,r.GI)(n)?m.min&&m.max?"".concat(m.min," – ").concat(m.max," kg"):"".concat(m.min,"+ kg"):"".concat(m.min,"kg").concat(g?" - "+g:""):""},{id:4,title:"Equipment",completed:Object.keys(p).length>0,summary:Object.keys(p).length?"".concat(Object.keys(p).length," items selected"):""}],b=e=>{let n=e+1;n<=h.length&&t(n)};return(0,l.jsx)("div",{className:"max-w-2xl mx-auto p-4 space-y-4",children:h.map(n=>(0,l.jsxs)("div",{className:"border rounded shadow-sm",children:[(0,l.jsxs)("button",{className:"w-full p-2 text-left font-bold flex justify-between items-center bg-gray-100 hover:bg-gray-200",onClick:()=>t(e===n.id?0:n.id),children:[(0,l.jsxs)("span",{children:["Step ".concat(n.id,": ").concat(n.title),n.summary&&(0,l.jsxs)("span",{className:"text-gray-500 ml-1",children:["(",n.summary,")"]})]}),n.completed&&(0,l.jsx)("span",{className:"text-green-600",children:"✅"})]}),e===n.id&&(0,l.jsxs)("div",{className:"p-4 bg-white",children:[1===n.id&&(0,l.jsx)(i,{onNext:()=>b(1)}),2===n.id&&(0,l.jsx)(d,{onNext:()=>b(2)}),3===n.id&&(0,l.jsx)(c,{onNext:()=>b(3)}),4===n.id&&(0,l.jsx)(x,{onNext:()=>b(4)})]})]},n.id))})}},9425:(e,t,n)=>{Promise.resolve().then(n.bind(n,5759))}},e=>{e.O(0,[937,441,255,358],()=>e(e.s=9425)),_N_E=e.O()}]);